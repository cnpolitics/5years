{"version":3,"sources":["../../javascript/_define.js","../../javascript/method/fetch.js","../../javascript/method/modal.js","../../javascript/method/util.js","../../javascript/main.js","../../javascript/ua.js","../../javascript/view/eight.js","../../javascript/view/five.js","../../javascript/view/home.js"],"names":["CNP","fetch","modal","util","GET","URL","GET_INIT","method","res","ok","text","error","Error","statusText","init","self","this","doc","document","$body","addEventListener","e","$target","target","matches","parentNode","getAttribute","open","$close","close","$content","innerHTML","$modal","querySelector","update","data","then","classList","add","remove","setTimeout","destroy","removeEventListener","Math","round","duration","Promise","reject","element","scrollTop","resolve","end_time","start_time","distance","start_top","smooth_step","start","end","point","x","previous_top","scroll_frame","now","Date","frameTop","style","overflowY","fixSafariScrollY","$html","getElementsByTagName","contains","uaString","ua","navigator","userAgent","uaRegExp","RegExp","UA_LIST","i","$eightMain","backHome","className","$eightSign","switchToEntry2","scroll","$board1","$fiveMain","$fiveSign","switchToEntry1","uaIs","showEntry2","$entry1","showEntry1","$entry2"],"mappings":"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","file":"app.js","sourcesContent":["/* global fetch */\n\n// Global namespace for the New Money QA app\nconst CNP = CNP || {};\n\n// Sub-namespace for the util methods\nCNP.fetch = {};\n\n// Sub-namespace for the modal methods\nCNP.modal = {};\n\n// Sub-namespace for the util methods\nCNP.util = {};\n","(function() {\n\t'use strict';\n\t\n\tCNP.fetch = {\n\t\tGET: function(URL) {\n\t\t\tconst GET_INIT = {\n\t\t\t\tmethod: 'GET',\n\t\t\t\t// mode: 'cors',\n\t\t\t\t// headers: {\n\t\t\t\t// \t'Pragma': 'no-cache',\n\t\t\t\t// \t'Cache-Control': 'no-cache',\n\t\t\t\t// },\n\t\t\t};\n\t\t\t\n\t\t\treturn fetch(URL, GET_INIT).then(function(res) {\n\t\t\t\tif (res.ok) {\n\t\t\t\t\treturn res.text();\n\t\t\t\t} else {\n\t\t\t\t\tlet error = new Error(res.statusText);\n\t\t\t\t\terror.res = res;\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t};\n\n})();\n","/*global Promise */\n\n(function() {\n\t'use strict';\n\t\n\tCNP.modal = {\n\t\tinit: function() {\n\t\t\tlet self = this;\n\t\t\tlet doc = document;\n\t\t\t\n\t\t\tlet $body = doc.getElementsByTagName('body')[0];\n\t\t\t$body.addEventListener('click', function(e) {\n\t\t\t\tlet $target = e.target;\n\t\t\t\t\n\t\t\t\t// Travel up until get a Close-Modal button or the modal wrap\n\t\t\t\twhile ($target && !$target.matches('.modal-open, body')) {\n\t\t\t\t\t$target = $target.parentNode;\n\t\t\t\t}\n\t\t\t\t// Check if the click.target is a Close-Modal button\n\t\t\t\tif ($target && $target.matches('.modal-open')) {\n\t\t\t\t\tconst URL = $target.getAttribute('data-url');\n\t\t\t\t\tself.open(URL);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\tlet $close = doc.querySelector('.modal-close');\n\t\t\t$close.addEventListener('click', self.close);\n\t\t},\n\t\t\n\t\tdestroy: function() {\n\t\t\tlet doc = document;\n\t\t\t\n\t\t\tlet $content = doc.querySelector('.modal-content');\n\t\t\t$content.innerHTML = '';\n\t\t},\n\t\t\n\t\topen: function(URL) {\n\t\t\tlet self = this;\n\t\t\tlet doc = document;\n\t\t\tlet $modal = doc.querySelector('.modal');\n\t\t\t\n\t\t\t$modal.classList.add('is-loading');\n\t\t\t// Click anywhere to close\n\t\t\t$modal.addEventListener('click', self.close);\n\t\t\t\n\t\t\tCNP.fetch.GET(URL).then(function(data) {\n\t\t\t\tself.update(data);\n\t\t\t}).then(function() {\n\t\t\t\t// setTimeout(function() {\n\t\t\t\t// \t$modal.classList.add('is-active');\n\t\t\t\t// }, 2000);\n\t\t\t\t$modal.classList.add('is-active');\n\t\t\t});\n\t\t},\n\t\t\n\t\tclose: function() {\n\t\t\tlet self = CNP.modal;\n\t\t\tlet doc = document;\n\t\t\t\n\t\t\tlet $modal = doc.querySelector('.modal');\n\t\t\t$modal.classList.remove('is-active', 'is-loading');\n\t\t\tsetTimeout(self.destroy, 400);\n\t\t},\n\t\t\n\t\tupdate: function(data) {\n\t\t\tlet self = this;\n\t\t\tlet doc = document;\n\t\t\t\n\t\t\tlet $content = doc.querySelector('.modal-content');\n\t\t\t$content.innerHTML = data;\n\t\t\t\n\t\t\tlet $modal = doc.querySelector('.modal');\n\t\t\t$modal.removeEventListener('click', self.close);\n\t\t\t$modal.classList.remove('is-loading');\n\t\t}\n\t};\n\n})();\n","/*global Promise */\n\n(function() {\n\t'use strict';\n\t\n\tCNP.util = {\n\t\t/**\n\t\t * Smoothy scrolling\n\t\t * \n\t\t * Ref: https://coderwall.com/p/hujlhg/smooth-scrolling-without-jquery\n\t\t * \n\t\t * @param {Object} element - The scrolled element\n\t\t * @param {Number} target - Target `scrollTop` value\n\t\t * @param {Number} duration - Scrolling duration\n\t\t * @returns {Promise} A Promise object after scroll ending\n\t\t */\n\t\tscroll: function(element, target, duration) {\n\t\t\ttarget = Math.round(target);\n\t\t\tduration = Math.round(duration);\n\t\t\tif (duration < 0) {\n\t\t\t\treturn Promise.reject(\"bad duration\");\n\t\t\t}\n\t\t\tif (duration === 0) {\n\t\t\t\telement.scrollTop = target;\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\tvar start_time = Date.now();\n\t\t\tvar end_time = start_time + duration;\n\n\t\t\tvar start_top = element.scrollTop;\n\t\t\tvar distance = target - start_top;\n\n\t\t\t// based on http://en.wikipedia.org/wiki/Smoothstep\n\t\t\tvar smooth_step = function (start, end, point) {\n\t\t\t\tif (point <= start) { return 0; }\n\t\t\t\tif (point >= end) { return 1; }\n\t\t\t\tvar x = (point - start) / (end - start); // interpolation\n\t\t\t\treturn x * x * (3 - 2 * x);\n\t\t\t}\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t// This is to keep track of where the element's scrollTop is\n\t\t\t\t// supposed to be, based on what we're doing\n\t\t\t\tvar previous_top = element.scrollTop;\n\n\t\t\t\t// This is like a think function from a game loop\n\t\t\t\tvar scroll_frame = function () {\n\t\t\t\t\tif (element.scrollTop != previous_top) {\n\t\t\t\t\t\treject(\"interrupted\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// set the scrollTop for this frame\n\t\t\t\t\tvar now = Date.now();\n\t\t\t\t\tvar point = smooth_step(start_time, end_time, now);\n\t\t\t\t\tvar frameTop = Math.round(start_top + (distance * point));\n\t\t\t\t\telement.scrollTop = frameTop;\n\n\t\t\t\t\t// check if we're done!\n\t\t\t\t\tif (now >= end_time) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If we were supposed to scroll but didn't, then we\n\t\t\t\t\t// probably hit the limit, so consider it done; not\n\t\t\t\t\t// interrupted.\n\t\t\t\t\tif (element.scrollTop === previous_top\n\t\t\t\t\t\t&& element.scrollTop !== frameTop) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tprevious_top = element.scrollTop;\n\n\t\t\t\t\t// schedule next frame for execution\n\t\t\t\t\tsetTimeout(scroll_frame, 0);\n\t\t\t\t}\n\n\t\t\t\t// boostrap the animation process\n\t\t\t\tsetTimeout(scroll_frame, 0);\n\t\t\t});\n\t\t},\n\t\t\n\t\t/**\n\t\t * Ref: http://stackoverflow.com/a/28389320/3253041\n\t\t */\n\t\tfixSafariScrollY: function(e) {\n\t\t\t// console.log('fix');\n\t\t\te.target.style.overflowY = 'hidden';\n\t\t\tsetTimeout(function() {\n\t\t\t\te.target.style.overflowY = '';\n\t\t\t\te.target.removeEventListener('transitionend', CNP.util.fixSafariScrollY);\n\t\t\t});\n\t\t},\n\t\t\n\t\tuaIs: function(uaString) {\n\t\t\tvar $html = document.getElementsByTagName('html')[0];\n\t\t\tif ($html.classList.contains('ua-' + uaString)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t};\n\n})();\n","(function() {\n\t'use strict';\n\t\n\tlet doc = document;\n\t\n\t// Enable the CSS `:active` interactions\n\tlet $body = doc.getElementsByTagName('body')[0];\n\t$body.addEventListener('touchstart', function(){});\n\t\n\tCNP.modal.init();\n\n})();\n","(function() {\n\t'use strict';\n\t\n\tlet doc = document;\n\t\n\tconst UA_LIST = ['Chrome', 'iPhone', 'iPad', 'Macintosh', 'MQQBrowser', 'Safari'];\n\tlet ua = navigator.userAgent;\n\tlet $html = doc.getElementsByTagName('html')[0];\n\t\n\tfor (let i = 0; i < UA_LIST.length; i++) {\n\t\tlet uaRegExp = new RegExp(UA_LIST[i]);\n\t\t\n\t\tif (ua.match(uaRegExp)) {\n\t\t\t$html.classList.add('ua-' + UA_LIST[i]);\n\t\t}\n\t}\n\n})();\n","(function() {\n\t'use strict';\n\n\tlet doc = document;\n\tlet $body = doc.getElementsByTagName('body')[0];\n\tlet $eightMain = doc.querySelector('.eight-main');\n\t\n\t// Back to the Cover view\n\tlet backHome = function () {\n\t\t$body.className = 'home';\n\t};\n\tlet $eightSign = doc.querySelector('.eight-sign');\n\t$eightSign.addEventListener('click', backHome);\n\t\n\t// Enter the Five view\n\tlet switchToEntry2 = function () {\n\t\tCNP.util.scroll($eightMain, 0, 2000)\n\t\t.then(function(){\n\t\t\t$body.className = 'home is-exchanging five';\n\t\t\tsetTimeout(function() {\n\t\t\t\t$body.className = 'home five';\n\t\t\t});\n\t\t});\n\t};\n\tlet $board1 = doc.querySelector('.eight-main .signboard--2');\n\t$board1.addEventListener('click', switchToEntry2);\n\n})();\n","(function() {\n\t'use strict';\n\n\tlet doc = document;\n\tlet $body = doc.getElementsByTagName('body')[0];\n\tlet $fiveMain = doc.querySelector('.five-main');\n\t\n\t// Back to the Cover view\n\tlet backHome = function () {\n\t\t$body.className = 'home';\n\t};\n\tlet $fiveSign = doc.querySelector('.five-sign');\n\t$fiveSign.addEventListener('click', backHome);\n\t\n\t// Enter the Five view\n\tlet switchToEntry1 = function () {\n\t\tCNP.util.scroll($fiveMain, 0, 2000)\n\t\t.then(function(){\n\t\t\t$body.className = 'home is-exchanging eight';\n\t\t\tsetTimeout(function() {\n\t\t\t\t$body.className = 'home eight';\n\t\t\t});\n\t\t});\n\t};\n\tlet $board1 = doc.querySelector('.five-main .signboard--1');\n\t$board1.addEventListener('click', switchToEntry1);\n\n})();\n","(function() {\n\t'use strict';\n\t\n\tlet doc = document;\n\tlet $body = doc.getElementsByTagName('body')[0];\n\tlet $eightMain = doc.querySelector('.eight-main');\n\tlet $fiveMain = doc.querySelector('.five-main');\n\t\n\tlet showEntry1 = function() {\n\t\t$body.classList.add('eight');\n\t\t\n\t\t// If Safari on Mac, fix scrolling issue\n\t\tif (CNP.util.uaIs('Macintosh') && CNP.util.uaIs('Safari') && !CNP.util.uaIs('Chrome')) {\n\t\t\t$eightMain.addEventListener('transitionend', CNP.util.fixSafariScrollY);\n\t\t}\n\t};\n\tlet showEntry2 = function() {\n\t\t$body.classList.add('five');\n\t\t\n\t\t// If Safari on Mac, fix scrolling issue\n\t\tif (CNP.util.uaIs('Macintosh') && CNP.util.uaIs('Safari') && !CNP.util.uaIs('Chrome')) {\n\t\t\t$fiveMain.addEventListener('transitionend', CNP.util.fixSafariScrollY);\n\t\t}\n\t};\n\t\n\tlet $entry1 = doc.querySelector('.home-entry--1');\n\t$entry1.addEventListener('click', showEntry1);\n\t\n\tlet $entry2 = doc.querySelector('.home-entry--2');\n\t$entry2.addEventListener('click', showEntry2);\n\n})();\n"]}